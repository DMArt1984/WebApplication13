@model FactPortal.Models.IndexStat

@{
    ViewData["Title"] = "Главная";
    string FormatValue = "{0:##0.#}";

    string NowDT = ViewBag.NowDT;

    int SOCount = ViewBag.SOCount; // количество объектов
    int alertSOCount = ViewBag.alertSOCount; // количество объектов с активными уведомлениями

    int nowSOinWorkCount = ViewBag.nowSOinWorkCount; // объекты в обслуживании текущего месяца
    int prevSOinWorkCount = ViewBag.prevSOinWorkCount; // объекты в обслуживании прошлого месяца

    int nowWorksCount = ViewBag.nowWorksCount; // количество работ текущего месяца
    int prevWorksCount = ViewBag.prevWorksCount; // количество работ прошлого месяца
    int nowWorksReady = ViewBag.nowWorksReady; // завершенные работы текущего месяца
    int prevWorksReady = ViewBag.prevWorksReady; // завершенные работы прошлого месяца
}

@section CSS_first {
    <!-- diagram -->
    <style>
        section {
            width: 100%;
            max-width: 30rem;
            padding: 1.5rem 1.5rem 2rem;
            border: 1px solid #a7a8aa;
            border-radius: 0.1rem;
            margin: auto;
        }

        ul.hchart {
            display: grid;
            grid-template-columns: auto;
            gap: .5em 0;
            /*align-items: center;*/
            margin: 0 auto;
            padding: 0;
            list-style-type: none;
            grid-auto-columns: 1fr;
            height: 100px;
        }

            ul.hchart li {
                color: white;
                background: #ffd100;
                /*display: inline;*/
                display: flex;
                align-items: center;
                justify-content: end; /*space-between;*/
                padding: 0.25rem 0.5rem;
                margin: 0.1rem;
                border-radius: 0.2rem;
            }

                ul.hchart li span {
                    font-weight: bold;
                    display: inline;
                }

        ul.legend {
            list-style: none;
        }

            ul.legend li {
                padding: 0.1rem;
            }
    </style>
    <style>
        .vchart {
            display: table;
            table-layout: fixed;
            width: 100%;
            height: 200px;
            margin: 0 auto;
            background-image: linear-gradient(bottom, rgba(0, 0, 0, 0.1) 2%, transparent 2%);
            background-size: 100% 50px;
            background-position: left top;
        }

            .vchart li {
                position: relative;
                display: table-cell;
                vertical-align: bottom;
                height: 200px;
            }

            .vchart span {
                margin: 0 1em;
                display: block;
                background: #d1ecfa;
                border-radius: 0.2rem;
                animation: draw 1s ease-in-out;
            }

                .vchart span:before {
                    position: absolute;
                    left: 0;
                    right: 0;
                    top: 100%;
                    display: block;
                    text-align: center;
                    content: attr(title);
                    word-wrap: break-word;
                }

        ul.hr {
            margin: 0; /* Обнуляем значение отступов */
            padding: 2px; /* Значение полей */
        }

            ul.hr li {
                display: inline; /* Отображать как строчный элемент */
                margin-right: 3px; /* Отступ слева */
                padding: 2px; /* Поля вокруг текста */
            }
    </style>
}


<!-- Circles -->
@if (SOCount > 0)
{
    <div class="row">
        <!-- объекты с активными уведомлениями -->
        <div class="col-xl-3 col-sm-6">
            @Html.Partial("_CardCircle", new { color = "crimson", percent = string.Format(FormatValue, alertSOCount * 100 / SOCount), title = "Объекты с активными уведомлениями", value = $"{alertSOCount} из {SOCount}", alpha = "", description = "" })
        </div>
        <!-- объекты в работе -->
        <div class="col-xl-3 col-sm-6">
            @Html.Partial("_CardCircle", new { color = "lightseagreen", percent = string.Format(FormatValue, nowSOinWorkCount * 100 / SOCount), title = "Объекты в обслуживании", value = $"{nowSOinWorkCount} из {SOCount}", alpha = (nowSOinWorkCount - prevSOinWorkCount), description = NowDT })
        </div>
        <!-- Выполненные обслуживания -->
        <div class="col-xl-3 col-sm-6">
            @Html.Partial("_CardCircle", new { color = "lightseagreen", percent = string.Format(FormatValue, nowWorksReady * 100 / nowWorksCount), title = "Выполненные обслуживания", value = $"{nowWorksReady} из {nowWorksCount}", alpha = (nowWorksReady - prevWorksReady), description = NowDT })
        </div>

        <!-- icon -->
        <div class="col-xl-3 col-sm-6">
            @Html.Partial("_CardCircle", new { icon = "ri-group-line", title = "Заголовок №4", value = 100, alpha = "9%", description = "text text text" })
        </div>
    </div>
}

@Html.Partial("_DiagramCircle")

<!-- Bars -->
<div class="row">

    <div class="col-xl-6 col-sm-12">
        @Html.Partial("_CardBars", new { title = "Диаграмма", bars = new Object[] { new { text = "Секция #1", icon = "ri-checkbox-circle-line", value = 25, percent = 25, color = "lightseagreen" }, new { text = "Секция #2", icon = "ri-calendar-2-line", value = 15, percent = 15, color = "lightsalmon" }, new { text = "Секция #3", icon = "ri-close-circle-line", value = 75, percent = 75, color = "lightslategray" } } })
    </div>

    <div class="col-xl-6 col-sm-12">
        @Html.Partial("_CardVChart", new { title = "Диаграмма", bars = new Object[] { new { text = "Секция #1", value = 25, percent = 25, color = "lightseagreen" }, new { text = "Секция #2", value = 15, percent = 15, color = "lightsalmon" }, new { text = "Секция #3", value = 75, percent = 75, color = "lightslategray" } } })
    </div>

</div>

<div class="row">
    <div class="col-xl-12 col-sm-12">
        @Html.Partial("_CardHChart", new { title = "Диаграмма", bars = new Object[] { new { text = "Секция #1", value = 3, color = "lightseagreen" }, new { text = "Секция #2", value = 15, color = "lightsalmon" }, new { text = "Секция #3", value = 25, color = "CornflowerBlue" }, new { text = "Всего", value = 3 + 15 + 25, color = "lightslategray" } } })
    </div>
</div>



@section Scripts {

    <script>


    </script>
}